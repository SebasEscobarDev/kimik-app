import{j as e}from"./jsx-runtime.7faW4zRM.js";import{b as N,a as E}from"./bg-white.CDTeDQmM.js";import{s as T}from"./logo.DFUuHF2-.js";import{H as B,C as M}from"./CardPerfilHorizontal.BJtYajqc.js";import{g as h,u as z,c as o,C as x}from"./consts.D182oArl.js";import{u as b,G as Y}from"./GlobalContext.Bmxmn3Fz.js";import{r as n}from"./index.DhYZZe0J.js";import{C as v}from"./index.D7_7wx8r.js";import{S as G,s as R,a as q,b as H,c as j}from"./swalert.BEXoF5YK.js";import{M as O}from"./ModalSettings.CGG43TL6.js";/* empty css                       */import"./notifies.C9F5HUp5.js";/* empty css                       */import"./sweetalert2.esm.all.BGf-Fe8G.js";import"./users.CmVo9b0J.js";const w=`${z}/couples`,W=async s=>{try{return await v.get({url:`${w}/user/${s}`,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+h("AuthToken")}})}catch(r){console.log(r)}},J=async s=>{try{return await v.request({method:"POST",url:`${w}/form`,headers:{Accept:"application/json","Content-Type":"multipart/form-data",Authorization:"Bearer "+h("AuthToken")},data:s})}catch(r){console.log(r)}},y=n.createContext(),K=({children:s})=>{const r={txtFullName:"",txtDia:"",txtMes:"",txtAnio:"",slcIdentify:"",txtFoto:"",acerca:"",user_id:""},[u,f]=n.useState(r),[d,p]=n.useState(null),[l,m]=n.useState(null);return e.jsx(y.Provider,{value:{form:u,setForm:f,file:d,setFile:p,previewUrl:l,setPreviewUrl:m},children:s})},Z=()=>n.useContext(y),Q=()=>{const{form:s,setForm:r,file:u,setFile:f,previewUrl:d,setPreviewUrl:p}=Z(),{languageText:l}=b(),m=n.useRef(null),g=()=>{m.current.click()},C=a=>{const t=a.target.files[0];if(t&&t.type.startsWith("image/")){f(t);const c=URL.createObjectURL(t);p(c)}else alert("Please select a valid image file"),f(null),p(null)},[F,k]=n.useState(""),[S,D]=n.useState(""),[A,I]=n.useState(""),_=a=>{const t=a.target.value;/^\d*$/.test(t)&&(t===""||parseInt(t)>=1&&parseInt(t)<=31)&&(k(t),r({...s,txtDia:t}))},$=a=>{const t=a.target.value;/^\d*$/.test(t)&&(t===""||parseInt(t)>=1&&parseInt(t)<=12)&&(D(t),r({...s,txtMes:t}))},L=a=>{const t=a.target.value;if(/^\d*$/.test(t)){I(t);const c=new Date().getFullYear(),i=c-70,U=c-18;t!==""&&(parseInt(t)<i||parseInt(t)>U)?r({...s,txtAnio:""}):r({...s,txtAnio:t})}},P=async()=>{if(console.log("form :"),console.log(s),!u){alert("Please select a file first");return}const a=new FormData;if(a.append("image",u),!s.txtFullName||!s.txtDia||!s.txtMes||!s.txtAnio||!s.slcIdentify||!d)return j("error","Error!",o.txtFormDos12[l]);const t=JSON.parse(h("User"));let c;const i={nombre:s.txtFullName,nacimiento_dia:s.txtDia,nacimiento_mes:s.txtMes,nacimiento_ano:s.txtAnio,genero_identifica:s.slcIdentify,foto:d,acerca:"",user_id:t.id};console.log(i),a.append("id",i.id),a.append("nombre",i.nombre),a.append("nacimiento_dia",i.nacimiento_dia),a.append("nacimiento_mes",i.nacimiento_mes),a.append("nacimiento_ano",i.nacimiento_ano),a.append("genero_identifica",i.genero_identifica),a.append("foto",""),a.append("acerca",i.acerca),a.append("user_id",i.user_id),c=await J(a),console.log(c),c.status>=200&&c.status<=400?j("success","Exito!",o.txtCouples1[l]):(console.log(c),j("error","Error!",o.txtFormSiete1[l]))};return e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"pt-4 md:pt-0 pl-4 md:pl-0 text-left mb-4 text-xl pop-regular",children:o.txtCouples2[l]}),e.jsx("div",{className:"w-full md:w-[500px] bg-[#D84066] md:rounded-[25px] p-3 md:border border-white",children:e.jsxs("div",{className:"my-4 flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"txtFullName",className:`${x.label}`,children:o.txtFormDos2[l]}),e.jsx("div",{className:"flex mb-2",children:e.jsx("input",{className:`${x.inputTwo}`,type:"text",name:"txtFullName",placeholder:o.txtFormDos3[l],pattern:"[a-zA-Z]+",minLength:"5",maxLength:"260",value:s.txtFullName,onChange:a=>r({...s,txtFullName:a.target.value}),required:!0})}),e.jsx("label",{htmlFor:"txtDia",className:`${x.label}`,children:o.txtFormDos4[l]}),e.jsx("div",{className:"flex mb-2",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"special-select mr-2",children:e.jsx("input",{className:`${x.inputTwo}`,type:"text",name:"txtDia",placeholder:o.txtFormDos5[l],minLength:"1",maxLength:"2",min:"1",max:"31",value:F,onChange:_,required:!0})}),e.jsx("div",{className:"special-select mr-2",children:e.jsx("input",{className:`${x.inputTwo}`,type:"text",name:"txtMes",placeholder:o.txtFormDos6[l],minLength:"1",maxLength:"2",min:"1",max:"12",value:S,onChange:$,required:!0})}),e.jsx("div",{className:"special-select",children:e.jsx("input",{className:`${x.inputTwo}`,type:"text",name:"txtAnio",placeholder:o.txtFormDos7[l],maxLength:"4",value:A,onChange:L,required:!0})})]})}),e.jsx("label",{htmlFor:"slcIdentify",className:`${x.label}`,children:o.txtGenero[l]}),e.jsx("div",{className:"flex mb-2 z-40",children:e.jsx(G,{id:"slcIdentify",options:o.optionsGender[l],form:s,setForm:r})}),e.jsx("label",{className:`${x.label}`,children:o.txtFormCuatro1[l]}),e.jsxs("div",{className:"hidden md:flex flex-col md:flex-row",children:[e.jsx("button",{onClick:g,title:"Subir Foto",type:"button",className:"flex bg-white w-full cursor-pointer md:w-2/4 border align-center items-center justify-center border-black rounded-[25px] md:mr-2 mb-4 md:mb-0",children:e.jsx("div",{className:"relative p-4",children:e.jsx("img",{className:"relative",id:"imgFotoOjos",src:d??R.src,width:245,height:143,alt:"Subir imagen"})})}),e.jsx("input",{ref:m,className:"hidden",type:"file",name:"inputFoto",accept:"image/*",onChange:C}),e.jsx("div",{className:"flex bg-white w-full md:w-2/4 flex-col justify-center border border-black rounded-[25px] md:ml-2",children:e.jsx("div",{className:"flex justify-center items-center h-[160px] overflow-hidden mb-2",children:e.jsx("img",{className:"w-[200px]",src:q.src,alt:"Demostracion de foto"})})})]}),e.jsx("div",{className:"flex mt-2",children:e.jsxs("button",{onClick:g,className:"bg-white border border-black w-full justify-between rounded-xl flex items-center px-4 h-[58px] mr-2",children:[e.jsxs("label",{className:"w-full text-black pop-bold",children:[d?"Cambiar":"Cargar"," Foto"]}),e.jsx("img",{src:H.src,className:"mr-2",width:30,alt:"Upload"})]})}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{className:"bg-transparent cursor-pointer border border-black w-[160px] justify-center rounded-[25px] flex items-center px-4 py-2 mr-2",children:e.jsxs("label",{className:" text-black pop-bold cursor-pointer",children:[" ",o.txtBtnCancel[l]]})}),e.jsx("button",{onClick:P,className:"ml-4 bg-black cursor-pointer border border-black w-[160px] justify-center rounded-[25px] flex items-center px-4 py-2 mr-2",children:e.jsxs("label",{className:"text-white pop-bold cursor-pointer",children:[" ",o.txtBtnAccept[l]]})})]})]})})]})},V=()=>{const{refHeaderButtonsNull:s}=b();n.useEffect(()=>{const m=h("AuthToken"),g=h("User");m!=null&&g!=null||(window.location.href="/")},[]);const{mode:r}=b(),[u,f]=n.useState(N.src);n.useEffect(()=>{f(r==="dark"?N.src:E.src)},[r]);const{userLogin:d}=b(),[p,l]=n.useState(!1);return n.useEffect(()=>{(async()=>{if(d.id===void 0)return;const m=await W(d.id);m.data&&m.data[0]?.id&&l(!0)})()},[]),e.jsxs("div",{style:{backgroundColor:"white",backgroundImage:`url(${u})`},className:"flex flex-col w-full min-h-screen md:p-10 text-center bg-contain",children:[e.jsx(B,{id:"headerButtonsBlob",back:!1,refBtn:s}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row items-center",children:[e.jsx("div",{className:"w-full md:w-[500px] flex flex-col z-10 pt-[1px]",children:e.jsx(M,{btnChat:!1,btnNotify:!1,maxw:!1})}),e.jsx("div",{className:"w-full hidden md:flex z-10 gap-4 px-4 md:px-40 pl-2 flex-col",children:e.jsx("div",{className:"w-full flex items-center justify-center mb-[-5px] mt-[-103px]",children:e.jsx("div",{className:"relative inline-block overflow-hidden",children:e.jsx("img",{src:T.src,width:150,alt:"Logo Kimik",className:"mb-[-50px]"})})})})]}),e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col xl:flex-row w-full justify-center gap-10 lg:px-[10%]",children:[!p&&e.jsx(Q,{}),p&&e.jsx("h1",{className:"text-2xl text-white pop-semi",children:"Ya tienes una pareja registrada!"})]})})]})},ue=()=>e.jsxs(Y,{children:[e.jsx(O,{}),e.jsx(K,{children:e.jsx(V,{})})]});export{ue as default};
